!function(t){function e(e){for(var r,a,u=e[0],c=e[1],l=e[2],h=0,f=[];h<u.length;h++)a=u[h],i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(s&&s(e);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={7:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var s=c;o.push([43,0,9]),n()}({43:function(t,e,n){"use strict";n.r(e),function(t){var e=n(13),r=n(32),i=n(9),o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}c((r=r.apply(t,e||[])).next())})},a=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},u=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};var l=function(){function n(){var n=this;this.ready=!1,this.onFontSizeChange=function(){return o(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.fontSize=parseInt(this.fontSizeInput.value),[4,this.redraw()];case 1:return t.sent(),[2]}})})},this.onTextChange=function(){return o(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.textInput.scrollHeight>this.textInput.clientHeight&&this.textInput.clientHeight<=250&&(this.textInput.style.height=this.textInput.scrollHeight+10+"px"),[4,this.redraw()];case 1:return t.sent(),[4,this.redraw()];case 2:return t.sent(),[2]}})})},this.onWrapChange=function(){return o(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.wrap=this.wrapInput.checked,[4,this.redraw()];case 1:return t.sent(),[4,this.redraw()];case 2:return t.sent(),[2]}})})},this.onDownload=function(){return o(n,void 0,void 0,function(){var t,e;return a(this,function(n){return t=this.canvas.toDataURL("image/png"),(e=document.createElement("a")).href=t,e.download=this.textInput.value+".png",document.body.appendChild(e),e.click(),[2]})})},this.getCopyLinkText=function(){var r=c(n.getData(),3),i=r[0],o=r[1],a=r[2],u="https://toki-pona-helper.glitch.me/sitelen?"+Object(e.stringify)({w:i,h:o,f:n.fontSize,l:a.map(function(e){return new t(e||"").toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})},{arrayFormat:"bracket"});return console.log("Link: ",u),u},this.onHelp=function(){return o(n,void 0,void 0,function(){return a(this,function(t){return this.helpModal.classList.add("is-active"),[2]})})},this.onCloseHelp=function(){return o(n,void 0,void 0,function(){return a(this,function(t){return this.helpModal.classList.remove("is-active"),[2]})})},this.getData=function(){var t=window.getComputedStyle(n.outputBox),e=n.wrap?n.outputBox.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-20:1/0,r=c(function(t,e,n){var r,i,o=[],a=0;try{for(var c=u(e.split("\n")),l=c.next();!l.done;l=c.next()){var s=l.value;o.push("");for(var h=s.split(" "),f=0;f<h.length;f++){var d=o[o.length-1]+h[f]+" ",p=t.measureText(d).width;p>a&&(a=p),p>n&&f>0?(o.push(""),o[o.length-1]=h[f]+" "):o[o.length-1]=d}}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return[o.map(function(t){return t.trim()}),a]}(n.ctx,n.textInput.value,e),2),i=r[0],o=r[1];return[(n.wrap&&o>e?e:o)+20,10+n.fontSize*i.length*1.25,i]},this.redraw=function(){return o(n,void 0,void 0,function(){var t,e,n,r,i,o,l,s,h,f,d;return a(this,function(a){if(this.ready){n=c(this.getData(),3),r=n[0],i=n[1],o=n[2],this.canvas.width=r,this.canvas.height=i,this.ctx.font=this.fontSize+"px linja-pona",this.ctx.textBaseline="top",this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="black";try{for(l=u(o.entries()),s=l.next();!s.done;s=l.next())h=c(s.value,2),f=h[0],d=h[1],this.ctx.fillText(d,10,10+f*this.fontSize*1.25)}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}}return[2]})})}}return n.prototype.run=function(){return o(this,void 0,void 0,function(){var t,e,n,o,l,s,h,f,d,p,v;return a(this,function(a){switch(a.label){case 0:this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.outputBox=document.getElementById("output_box"),this.helpModal=document.getElementById("help_modal"),this.textInput=document.getElementById("text_input"),this.wrapInput=document.getElementById("wrap_input"),this.fontSizeInput=document.getElementById("font_size_input"),this.fontSizeInput.addEventListener("input",this.onFontSizeChange),this.textInput.addEventListener("input",this.onTextChange),this.wrapInput.addEventListener("change",this.onWrapChange),document.getElementById("download_button").addEventListener("click",this.onDownload),document.getElementById("help_button").addEventListener("click",this.onHelp),document.getElementById("modal_background").addEventListener("click",this.onCloseHelp),document.getElementById("modal_close").addEventListener("click",this.onCloseHelp),n=document.getElementById("copy_link_button"),o=new r(n,{text:this.getCopyLinkText}),l=Object(i.a)(n,{content:"",animateFill:!1,animation:"fade",arrow:!0,trigger:"manual"}),s=function(t,e){o.on(t,function(){l.setContent(e),l.show()})};try{for(h=u([["success","Copied!"],["error","Not supported!"]]),f=h.next();!f.done;f=h.next())d=c(f.value,2),p=d[0],v=d[1],s(p,v)}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}return this.wrapInput.dispatchEvent(new Event("change")),this.fontSizeInput.dispatchEvent(new Event("input")),this.textInput.dispatchEvent(new Event("input")),this.ready=!0,[4,this.redraw()];case 1:return a.sent(),[4,this.redraw()];case 2:return a.sent(),[2]}})})},n}();document.addEventListener("DOMContentLoaded",function(){(new l).run().catch(function(t){console.error(t)})})}.call(this,n(44).Buffer)}});